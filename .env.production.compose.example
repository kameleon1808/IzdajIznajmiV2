# Copy to .env.production.compose and adjust values before first production run.
# Usage: docker compose -p izdaji_prod --env-file .env.production.compose -f docker-compose.production.yml up -d --build

APP_URL=https://api.izdaji.example
FRONTEND_URL=https://app.izdaji.example
FRONTEND_URLS=https://app.izdaji.example
SANCTUM_STATEFUL_DOMAINS=app.izdaji.example
SESSION_DOMAIN=.izdaji.example
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=lax
LOG_LEVEL=warning

POSTGRES_DB=izdaji_iznajmi
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

REVERB_APP_ID=izdaji-production
REVERB_APP_KEY=CHANGE_ME_REVERB_KEY
REVERB_APP_SECRET=CHANGE_ME_REVERB_SECRET
REVERB_ALLOWED_ORIGINS=https://app.izdaji.example

MEILISEARCH_KEY=change-me
VITE_SEARCH_V2=true
VITE_ALLOWED_HOSTS=app.izdaji.example,api.izdaji.example
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:ops@izdaji.example
PUSH_NOTIFICATION_ICON=/vite.svg
PUSH_NOTIFICATION_BADGE=/vite.svg
VITE_ENABLE_WEB_PUSH=true
VITE_VAPID_PUBLIC_KEY=
VERIFICATION_CODE_TTL_MINUTES=10

SECURITY_HEADERS_ENABLED=true
SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff
SECURITY_X_FRAME_OPTIONS=SAMEORIGIN
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin
SECURITY_PERMISSIONS_POLICY="camera=(), microphone=(), geolocation=(self), payment=(), usb=(), interest-cohort=()"
SECURITY_HSTS_ENABLED=true
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
SECURITY_HSTS_PRELOAD=true
SECURITY_HSTS_PROD_ONLY=true
SECURITY_CSP_ENABLED=true
SECURITY_CSP_REPORT_ONLY=false
SECURITY_CSP_POLICY="default-src 'self'; script-src 'self' 'nonce-{nonce}'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob: https:; font-src 'self' data:; connect-src 'self' wss://api.izdaji.example https://api.izdaji.example; base-uri 'self'; object-src 'none'; frame-ancestors 'self'; form-action 'self'; upgrade-insecure-requests"
ENABLE_AV_SCAN=true
CLAMSCAN_BINARY=/usr/bin/clamscan
